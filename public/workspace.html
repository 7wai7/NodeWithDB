<!DOCTYPE html>
<!-- This site was created in Webflow. https://webflow.com -->
<!-- Last Published: Sun Jan 19 2025 13:35:52 GMT+0000 (Coordinated Universal Time) -->
<html data-wf-domain="task-manager-0fe9ca.webflow.io" data-wf-page="678973906c11bdc4a2355170" data-wf-site="678973906c11bdc4a2355168" data-wf-status="1">
    <head>
        <meta charset="utf-8"/>
        <title>Task Manager</title>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="Webflow" name="generator"/>
        <link href="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/css/task-manager-0fe9ca.webflow.93e3699b7.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="https://bevacqua.github.io/dragula/dist/dragula.css">
        <script type="text/javascript">
            !function(o, c) {
                var n = c.documentElement
                  , t = " w-mod-";
                n.className += t + "js",
                ("ontouchstart"in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
            }(window, document);
        </script>
        <link href="https://cdn.prod.website-files.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
        <link href="https://cdn.prod.website-files.com/img/webclip.png" rel="apple-touch-icon"/>
    </head>
    <body class="body">
        <div id="context-menu" style="display: none; position: absolute;">
            <button id="delete-task-button">Delete</button>
        </div>
        
        <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-2 w-nav">
            <div class="div-block-27">
                <a onclick="logout()" class="brand w-nav-brand">
                    <h1 class="heading">Task Manager</h1>
                </a>
            </div>
            <div class="div-block-28">
                <img src="https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="eager" width="101" alt="" class="image"/>
            </div>
        </div>
        <div class="div-block-21">
            <div class="div-block-19">
                <div class="div-block-22">
                    <a id="show-create-space-form" href="#" class="link-block-3 w-inline-block">
                        <h2 class="heading-3">Spaces</h2>
                        <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                    </a>
                </div>
                <div id="spaces-list" class="div-block-23">
                    <!-- <a href="#" class="link-block-2 active-space w-inline-block">
                        <h5 class="heading-4">New Space 1</h5>
                    </a> -->
                    <a href="#" class="link-space w-inline-block">
                        <h5 class="heading-4">New Space 1</h5>
                    </a>
                </div>
            </div>
            <div class="div-block-20">
                <div class="div-block-24">
                    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
                        <div class="container-2 w-container">
                            <nav role="navigation" class="nav-menu-2 w-nav-menu">
                                <a href="#" class="nav-link-2 w-nav-link">List</a>
                                <a href="#" class="nav-link-3 w-nav-link">Calendar</a>
                                <a href="#" class="nav-link-4 w-nav-link">Board</a>
                            </nav>
                            <div class="menu-button w-nav-button">
                                <div class="w-icon-nav-menu"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="task-section">
                    <div id="tasks-block" class="sticky-element">
                        <div class="task-status-container">
                            <div class="task-container">
                                <h4 class="task-status">To Do</h4>
                                <div id="To-Do" class="tasks-container"></div>
                                <a href="#" class="link-add-task w-inline-block">
                                    <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                                    <div class="text-block-2">Add Task</div>
                                </a>
                            </div>
                        </div>
                        <div class="task-status-container">
                            <div class="task-container">
                                <h4 class="task-status">In Progress</h4>
                                <div id="In-Progress" class="tasks-container"></div>
                                <a href="#" class="link-add-task w-inline-block">
                                    <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                                    <div class="text-block-2">Add Task</div>
                                </a>
                            </div>
                        </div>
                        <div class="task-status-container">
                            <div class="task-container">
                                <h4 class="task-status">On Hold</h4>
                                <div id="On-Hold" class="tasks-container"></div>
                                <a href="#" class="link-add-task w-inline-block">
                                    <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                                    <div class="text-block-2">Add Task</div>
                                </a>
                            </div>
                        </div>
                        <div class="task-status-container">
                            <div class="task-container">
                                <h4 class="task-status">Completed</h4>
                                <div id="Completed" class="tasks-container"></div>
                                <a href="#" class="link-add-task w-inline-block">
                                    <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                                    <div class="text-block-2">Add Task</div>
                                </a>
                            </div>
                        </div>
                        <div class="task-status-container">
                            <div class="task-container">
                                <h4 class="task-status">Canceled</h4>
                                <div id="Canceled" class="tasks-container"></div>
                                <a href="#" class="link-add-task w-inline-block">
                                    <img src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678bcd225ff93824f8618b79_add_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg" loading="lazy" alt="Add"/>
                                    <div class="text-block-2">Add Task</div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="create-space-form" class="div-block-30">
            <div class="div-block-31">
                <h3 class="heading-5">Create a space</h3>
                <div class="w-form">
                    <form id="wf-form-Space-Form" name="wf-form-Space-Form" data-name="Space Form" method="post" class="form-2" data-wf-page-id="678973906c11bdc4a2355170" data-wf-element-id="c2ba181f-8a2b-8440-1dfe-ebdaef68f48f" data-turnstile-sitekey="0x4AAAAAAAQTptj2So4dx43e">
                        <input class="text-field-4 w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="space-name-field"/>
                        <input type="submit" data-wait="Please wait..." id="submit-new-space" class="submit-button w-button" value="Create"/>
                    </form>
                    <div class="w-form-done"></div>
                    <div class="w-form-fail"></div>
                </div>
            </div>
        </div>
        <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=678973906c11bdc4a2355168" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/js/webflow.f696d5c3a3a005c6fc0eaf50aba08d89.js" type="text/javascript"></script>
 


    <script src="https://bevacqua.github.io/dragula/dist/dragula.js"></script>
    <script>
        var drake = dragula({
            containers: [...document.querySelectorAll('.tasks-container'), ...document.querySelectorAll('.task-status-container')],
            moves: function (el, source, handle, sibling) {
                return el.classList.contains('task-form');
            }
        });

        const dropToInnerContainer = (el, target, source, sibling) => {
            if (target) {
                let innerTarget = target.querySelector('.tasks-container');
                if (innerTarget) {
                    innerTarget.appendChild(el);
                }
            }
        }

        drake.on('drop', function (el, target, source, sibling) {
            dropToInnerContainer(el, target, source, sibling);

            if (target) {
                let innerTarget = target.classList.contains('tasks-container') ? target : target.querySelector('.tasks-container');
                const status = innerTarget.id.replace(/-+/g, ' ');

                const token = localStorage.getItem('token');
                fetch(`/api/tasks/${el.id}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status })
                })
                .then(response => response.json())
                .then(data => {console.log(data);
                })
                .catch(err => {})
            }
        });
        drake.on('shadow', dropToInnerContainer);
    </script>

    <script>
        function logout() {
            localStorage.removeItem('token');
            window.location.href = '/';
        }

        function getActiveSpace() {
            return document.getElementById('spaces-list').querySelector('.active-space');
        }
        
        function renderTasks() {
            document.getElementById('tasks-block').style.display = "none";

            const activeSpace = getActiveSpace();
            if(!activeSpace) return;



            const token = localStorage.getItem('token');
            fetch(`/api/tasks/space/${activeSpace.id}`, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
                .then(response => response.json())
                .then(data => {
                    document.querySelectorAll(".tasks-container").forEach((el) => {el.innerHTML = ''});
                    
                    data.forEach((task) => {
                        const status = task.status;
                        const taskList = document.getElementById(status.replace(/\s+/g, '-'));

                        const formattedDate = task.dueDate 
                        ? new Date(task.dueDate).toLocaleDateString('uk-UA')
                        : '-';


                        let taskForm = document.createElement("div");
                        taskForm.id = task._id;
                        taskForm.className = "task-form";
                        taskForm.innerHTML = `
                            <div class="div-block-29">
                                <div class="task-field-name">${task.title}</div>
                                <a href="#" class="edit-task w-inline-block">
                                    <img width="30" loading="lazy" alt="Edit" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678be6893be404b47ff2dc0c_edit_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                </a>
                            </div>
                            <div class="task-field-description">${task.description}</div>
                            <div class="task-field">
                                <img width="24" loading="lazy" alt="Priority" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a9d57a30b264b1d9140d8_flag_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                <div class="task-field-priority">${task.priority}</div>
                            </div>
                            <div class="task-field">
                                <img width="24" loading="lazy" alt="Date" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a89d0193f885bc7adcc55_calendar_month_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                <div class="task-field-date">${formattedDate}</div>
                            </div>
                        `;

                        taskList.appendChild(taskForm);

                        taskForm.querySelector(".edit-task").addEventListener("click", function (event) {
                            event.preventDefault();

                            // Знаходимо форму перегляду
                            /* let taskForm = this.closest(".task-form"); */

                            // Отримуємо значення з перегляду
                            let taskName = taskForm.querySelector(".task-field-name").innerText;
                            let taskDesc = taskForm.querySelector(".task-field-description").innerText;
                            let taskPriority = taskForm.querySelector(".task-field-priority").innerText;
                            let taskDate = taskForm.querySelector(".task-field-date").innerText;

                            const formattedDateEN = taskDate
                            /* ? new Date(taskDate.replace(/\./g, '-')).toLocaleDateString('en-CA')  // Формат YYYY-MM-DD
                            : '-';

                            console.log("formattedDateEN " + formattedDateEN); */
                            

                            // Створюємо форму редагування
                            let editForm = document.createElement("div");
                            editForm.className = "task-form w-form";
                            editForm.innerHTML = `
                                <form id="wf-form-Date-Form" name="wf-form-Date-Form" data-name="Date Form" method="get" class="form" data-wf-page-id="678973906c11bdc4a2355170" data-wf-element-id="4715bba6-78fe-26f7-2b62-6808d7d3e677" data-turnstile-sitekey="0x4AAAAAAAQTptj2So4dx43e">
                                    <div class="div-block-29">
                                        <input class="task-field-name-edit w-input" maxlength="256" name="field-4" data-name="Field 4" placeholder="Task Name" read="readonly" type="text" value="${taskName}" id="field-4" required=""/>
                                        <a href="#" class="edit-task-done w-inline-block">
                                            <img width="30" loading="lazy" alt="Done" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678c0cbea9998141bee90982_check_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                        </a>
                                    </div>
                                    <textarea placeholder="Example Text" maxlength="5000" id="field-5" name="field-5" data-name="Field 5" class="task-field-description-edit w-input">${taskDesc}</textarea>
                                    <div class="task-field">
                                        <img width="24" loading="lazy" alt="Priority" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a9d57a30b264b1d9140d8_flag_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                        <select id="Priority-3" name="Priority-3" data-name="Priority 3" class="task-field-priority-edit w-select">
                                            <option value="Low" ${taskPriority === 'Low' ? 'selected' : ''}>Low</option>
                                            <option value="Medium" ${taskPriority === 'Medium' ? 'selected' : ''}>Medium</option>
                                            <option value="High" ${taskPriority === 'High' ? 'selected' : ''}>High</option>
                                        </select>
                                    </div>
                                    <div class="task-field">
                                        <img width="24" loading="lazy" alt="Due Date" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a89d0193f885bc7adcc55_calendar_month_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                        <input type="date" class="task-field-date-edit" value="${formattedDateEN}"/>
                                    </div>
                                </form>
                                <div class="w-form-done">
                                    
                                </div>
                                <div class="w-form-fail">
                                    
                                </div>
                            `;

                            // Ховаємо форму перегляду і додаємо форму редагування
                            taskForm.style.display = "none";
                            taskForm.parentNode.insertBefore(editForm, taskForm.nextSibling);

                            // Обробник кнопки збереження
                            editForm.querySelector(".edit-task-done").addEventListener("click", function (event) {
                                event.preventDefault();

                                // Отримуємо оновлені дані
                                let updatedTaskName = editForm.querySelector(".task-field-name-edit").value || "-";
                                let updatedTaskDesc = editForm.querySelector(".task-field-description-edit").value;
                                let updatedTaskPriority = editForm.querySelector(".task-field-priority-edit").value;
                                let updatedTaskDate = editForm.querySelector(".task-field-date-edit").value;

                                /* updatedTaskDate = updatedTaskDate ? new Date(updatedTaskDate).toLocaleDateString('uk-UA') : null; */
                                
                                
                                // Оновлюємо форму перегляду
                                taskForm.querySelector(".task-field-name").innerText = updatedTaskName;
                                taskForm.querySelector(".task-field-description").innerText = updatedTaskDesc;
                                taskForm.querySelector(".task-field-priority").innerText = updatedTaskPriority;
                                taskForm.querySelector(".task-field-date").innerText = updatedTaskDate /* ? new Date(updatedTaskDate).toLocaleDateString('uk-UA') : */ || '-';

                                // Видаляємо форму редагування і показуємо оновлену форму перегляду
                                editForm.remove();
                                taskForm.style.display = "flex";

                                const token = localStorage.getItem('token');
                                fetch(`/api/tasks/${taskForm.id}`, {
                                    method: 'PUT',
                                    headers: {
                                        'Authorization': `Bearer ${token}`,
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ title: updatedTaskName, description: updatedTaskDesc, priority: updatedTaskPriority, dueDate: updatedTaskDate })
                                })
                                .then(response => response.json())
                                .then(data => {console.log(data);})
                                .catch(err => {})
                            });
                        });
                    });

                    document.getElementById('tasks-block').style.display = "flex";
                })
                .catch(error => console.log(error));
        }

        function renderSpaces() {
            const token = localStorage.getItem('token');
            fetch('/api/tasks/space', {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(response.message);
                }
                return response.json();
            })
            .then(data => {
                console.log(data);

                const activeSpace = getActiveSpace();
                let activeSpaceId;
                if(activeSpace) activeSpaceId = activeSpace.id;
                
                const spacesContainer = document.getElementById('spaces-list');
                spacesContainer.innerHTML = '';

                data.forEach((space) => {
                    const spaceLink = document.createElement('a');
                    spaceLink.id = space._id;
                    spaceLink.className = `link-space w-inline-block`;
                    spaceLink.innerHTML = `
                        <h5 class="heading-4">${space.name}</h5>
                    `;
                    if(spaceLink.id === activeSpaceId) spaceLink.classList.add('active-space');

                    spacesContainer.appendChild(spaceLink);

                    spaceLink.addEventListener("click", function (event) {
                        event.preventDefault();

                        const activeSpace = spacesContainer.querySelector('.active-space');
                        if (activeSpace) {
                            activeSpace.classList.remove('active-space');
                        }

                        this.classList.add('active-space');
                        renderTasks();
                    });
                })

                renderTasks();
            })
            .catch(err => console.log(err))
        }

        document.addEventListener("DOMContentLoaded", function () {
            const contextMenu = document.getElementById('context-menu');

            // Показуємо контекстне меню
            document.addEventListener('contextmenu', (event) => {
                const taskForm = event.target.closest('.task-form');
                const spaceForm = event.target.closest('.link-space');
                console.log(spaceForm);
                
                if (taskForm || spaceForm) {
                    event.preventDefault(); // Зупиняємо стандартне меню браузера

                    // Показуємо кнопку на позиції миші
                    contextMenu.style.left = `${event.pageX}px`;
                    contextMenu.style.top = `${event.pageY}px`;
                    contextMenu.style.display = 'block';
                    contextMenu.style.zIndex = 9000;

                    // Отримуємо ID елемента
                    let url = '';

                    if (taskForm) {
                        url = "/api/tasks/" + taskForm.id;
                    } else if(spaceForm) {
                        url = "/api/tasks/space/" + spaceForm.id;
                    }
                    console.log(url);
                    

                    // Додаємо обробник для кнопки видалення
                    const deleteButton = document.getElementById('delete-task-button');
                    deleteButton.onclick = () => {
                        const token = localStorage.getItem('token');
                        fetch(url, {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `Bearer ${token}`
                            }
                        })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Failed to delete');
                            }
                            contextMenu.style.display = 'none';
                            renderSpaces();
                        })
                        .catch(err => console.error(err));
                    };
                } else {
                    contextMenu.style.display = 'none';
                }
            });

            document.addEventListener('click', () => {
                contextMenu.style.display = 'none';
            });
            
            
            document.getElementById('tasks-block').style.display = "none";

            document.getElementById('create-space-form').children[0].addEventListener("click", function (event) {
                event.stopPropagation();
            });

            document.getElementById('create-space-form').addEventListener("click", function (event) {
                event.preventDefault();

                this.style.display = "none"
            });

            document.getElementById('show-create-space-form').addEventListener("click", function (event) {
                event.preventDefault();

                const form = document.getElementById('create-space-form');
                form.style.display = "flex";
            });

            document.getElementById('submit-new-space').addEventListener("click", function (event) {
                event.preventDefault();

                const nameField = document.getElementById('space-name-field');
                const name = nameField.value;
                nameField.value = '';

                const token = localStorage.getItem('token');
                fetch(`/api/tasks/space/${name}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                })
                .then(response => {
                    if(!response.ok) {
                        throw new Error(response.message);
                    }
                    return response.json();
                })
                .then(data => {
                    const form = document.getElementById('create-space-form');
                    form.style.display = "none";

                    renderSpaces();
                })
                .catch(err => console.log(err))
            });


            
            document.querySelectorAll(".link-add-task").forEach(button => {
                button.addEventListener("click", function (event) {
                    event.preventDefault();

                    const tasksContainer = button.previousElementSibling;
                    const status = tasksContainer.id.replace(/-+/g, ' ');;


                    let editForm = document.createElement("div");
                    editForm.className = "task-form w-form";
                    editForm.innerHTML = `
                        <form id="wf-form-Date-Form" name="wf-form-Date-Form" data-name="Date Form" method="get" class="form" data-wf-page-id="678973906c11bdc4a2355170" data-wf-element-id="4715bba6-78fe-26f7-2b62-6808d7d3e677" data-turnstile-sitekey="0x4AAAAAAAQTptj2So4dx43e">
                            <div class="div-block-29">
                                <input class="task-field-name-edit w-input" maxlength="256" name="field-4" data-name="Field 4" placeholder="Task Name" read="readonly" type="text" value="name" id="field-4" required=""/>
                                <a href="#" class="edit-task-done w-inline-block">
                                    <img width="30" loading="lazy" alt="Done" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678c0cbea9998141bee90982_check_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                </a>
                            </div>
                            <textarea placeholder="Example Text" maxlength="5000" id="field-5" name="field-5" data-name="Field 5" class="task-field-description-edit w-input"></textarea>
                            <div class="task-field">
                                <img width="24" loading="lazy" alt="Priority" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a9d57a30b264b1d9140d8_flag_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                <select id="Priority-3" name="Priority-3" data-name="Priority 3" class="task-field-priority-edit w-select">
                                    <option value="Low">Low</option>
                                    <option value="Medium">Medium</option>
                                    <option value="High">High</option>
                                </select>
                            </div>
                            <div class="task-field">
                                <img width="24" loading="lazy" alt="Due Date" src="https://cdn.prod.website-files.com/678973906c11bdc4a2355168/678a89d0193f885bc7adcc55_calendar_month_24dp_5F6368_FILL0_wght300_GRAD0_opsz24.svg"/>
                                <input type="date" class="task-field-date-edit" value="-"/>
                            </div>
                        </form>
                        <div class="w-form-done">
                            
                        </div>
                        <div class="w-form-fail">
                            
                        </div>
                    `;

                    tasksContainer.appendChild(editForm);

                    editForm.querySelector(".edit-task-done").addEventListener("click", function (event) {
                        event.preventDefault();

                        let title = editForm.querySelector(".task-field-name-edit").value || "-";
                        let description = editForm.querySelector(".task-field-description-edit").value;
                        let priority = editForm.querySelector(".task-field-priority-edit").value;
                        let dueDate = editForm.querySelector(".task-field-date-edit").value;

                        /* dueDate = dueDate ? new Date(dueDate).toLocaleDateString('uk-UA') : null; */


                        const newTask = { title, description, status, priority, dueDate };


                        editForm.remove();

                        const activeSpace = getActiveSpace();
                        const token = localStorage.getItem('token');
                        fetch(`/api/tasks/${activeSpace.id}`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(newTask)
                        })
                        .then(response => response.json())
                        .then(data => { 
                            console.log(data);
                            renderTasks()
                        })
                        .catch(err => {})
                    });
                });
            });
        });


        const token = localStorage.getItem('token');
        fetch('/api/auth', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`
            }
        })
        .then(response => {
            if(!response.ok) window.location.href = '/';
        })
        .catch(error => {});
        renderSpaces();
    </script>

</body>

</html>